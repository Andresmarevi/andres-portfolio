---
import { getLangFromUrl, getTranslations, getLocalizedPath } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = getTranslations(lang);
const currentPath = Astro.url.pathname.replace(/^\/(en|es)/, '') || '/';
---

<nav class="bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50">
	<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
		<div class="flex justify-between items-center h-16">
			<!-- Logo -->
			<a href={getLocalizedPath('/', lang)} class="flex items-center space-x-2">
				<span class="font-bold text-xl text-blue-600">AMR</span>
				<span class="hidden sm:inline text-sm font-semibold">Andrés Martínez Reviriego</span>
			</a>

			<!-- Navigation Links -->
			<ul class="flex items-center space-x-1 sm:space-x-4">
				<li>
					<a
						href={getLocalizedPath('/', lang)}
						class="px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
					>
						{t.nav.home}
					</a>
				</li>
				<li>
					<a
						href={getLocalizedPath('/projects', lang)}
						class="px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
					>
						{t.nav.projects}
					</a>
				</li>
				<li>
					<a
						href={getLocalizedPath('/about', lang)}
						class="px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
					>
						{t.nav.about}
					</a>
				</li>
				<li>
					<a
						href={getLocalizedPath('/contact', lang)}
						class="px-3 py-2 rounded-md text-sm font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
					>
						{t.nav.contact}
					</a>
				</li>
				
				<!-- Language Switcher -->
				<li class="ml-2">
					<div class="flex items-center space-x-1 border-l border-gray-300 dark:border-gray-600 pl-2">
						<a
							href={currentPath}
							class={`px-2 py-1 rounded text-sm font-medium transition-colors ${
								lang === 'en' 
									? 'bg-blue-600 text-white' 
									: 'hover:bg-gray-100 dark:hover:bg-gray-700'
							}`}
						>
							EN
						</a>
						<a
							href={`/es${currentPath}`}
							class={`px-2 py-1 rounded text-sm font-medium transition-colors ${
								lang === 'es' 
									? 'bg-blue-600 text-white' 
									: 'hover:bg-gray-100 dark:hover:bg-gray-700'
							}`}
						>
							ES
						</a>
					</div>
				</li>
			</ul>
		</div>
	</div>
</nav>
