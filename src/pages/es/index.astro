---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import ProjectCard from '../../components/ProjectCard.astro';
import { getLangFromUrl, getTranslations, getLocalizedPath } from '../../i18n/utils';
import { Image } from 'astro:assets';
import profileImage from '../../assets/profile.jpg';

const lang = getLangFromUrl(Astro.url);
const t = getTranslations(lang);
const projects = (await getCollection("projects")).slice(0, 3);
---

<BaseLayout title={t.home.title}>
	<!-- Hero Section -->
	<section class="min-h-[80vh] flex items-center justify-center relative overflow-hidden">
		<!-- Background gradient -->
		<div class="absolute inset-0 bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900"></div>
		
		<!-- Content -->
		<div class="relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
			<!-- Profile Image -->
			<div class="mb-8">
				<Image
					src={profileImage}
					alt="Andrés Martínez Reviriego"
					class="w-32 h-32 rounded-full mx-auto object-cover border-4 border-blue-600 dark:border-blue-400 shadow-lg"
					width={128}
					height={128}
				/>
			</div>
			
			<h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
				{t.home.hero.greeting}
			</h1>
			<p class="text-xl md:text-2xl text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto">
				{t.home.hero.subtitle}
			</p>
			<div class="flex gap-4 justify-center flex-wrap">
				<a href={getLocalizedPath('/projects', lang)} class="px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold">
					{t.home.hero.cta1}
				</a>
				<a href={getLocalizedPath('/about', lang)} class="px-8 py-3 border-2 border-blue-600 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-gray-800 transition-colors font-semibold">
					{t.home.hero.cta2}
				</a>
			</div>
		</div>
	</section>

	<!-- Featured Projects -->
	<section class="py-20 bg-white dark:bg-gray-900">
		<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
			<h2 class="text-4xl font-bold mb-12 text-center">{t.home.featured.title}</h2>
			<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
				{projects.map((project) => (
					<ProjectCard project={project} />
				))}
			</div>
			<div class="text-center mt-12">
				<a href={getLocalizedPath('/projects', lang)} class="inline-block px-6 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-blue-600 dark:hover:border-blue-400 transition-colors">
					{t.home.featured.viewAll}
				</a>
			</div>
		</div>
	</section>

	<!-- CTA Section -->
	<section class="py-20 bg-gradient-to-r from-blue-600 to-purple-600">
		<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
			<h2 class="text-4xl font-bold text-white mb-6">{t.home.cta.title}</h2>
			<p class="text-xl text-blue-100 mb-8">
				{t.home.cta.subtitle}
			</p>
			<a href="mailto:andresmarevi@gmail.com" class="inline-block px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-blue-50 transition-colors font-semibold">
				{t.home.cta.button}
			</a>
		</div>
	</section>
</BaseLayout>
